import { z } from "zod";

const envSchema = z.object({
  DATABASE_URL: z.string().url(),
  STRIPE_SECRET_KEY: z.string().startsWith("sk_"),
  BUNNY_API_KEY: z.string().min(32),
  JWT_SECRET: z.string().min(32),
  SENTRY_DSN: z.string().url().optional(),
  // Ajoute ici toutes tes variables critiques nécessaires au build et à l'app
});

try {
  envSchema.parse(process.env);
  console.log("✅ Toutes les variables d'environnement critiques sont valides !");
  process.exit(0);
} catch (e) {
  console.error("❌ Variables d'environnement invalides :");
  console.error(e.errors || e);
  process.exit(1);
}
